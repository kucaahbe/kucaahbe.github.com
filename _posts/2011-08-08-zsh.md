---
# vim:foldmethod=marker
layout: post
title: Z shell configuring and usage

---

Man pages description:
----------------------

| man page                     | description                                                 |
|:----------------------------:|:------------------------------------------------------------|
| <strong>zshmisc</strong>     | programming                                                 |
| <strong>zshexpn</strong>     | variables usage, globbing                                   |
| <strong>zshparam</strong>    | shell variables(like PROMPT etc.)                           |
| <strong>zshoptions</strong>  | commandline options(setopt, no_beep etc.)                   |
| <strong>zshbuiltins</strong> | builtin shell commands(like alias, bindkey, cd, echo, kill) |
| <strong>zshzle</strong>      | editing in commandline                                      |
| <strong>zshcompsys</strong>  | z-shell completing system and it's configuration            |
| <strong>zshmodules</strong>  | loadable extesion modules                                   |
| <strong>zshcontrib</strong>  | user extesions, tips                                        |

Startup
-------

configuration files read order:

1. `/etc/zsh/zshenv`
2. `$ZDOTDIR/.zshenv`
3. `/etc/zsh/zprofile` (if the shell is a <strong>login</strong> shell)
4. `$ZDOTDIR/.zprofile` (if the shell is a <strong>login</strong> shell)
5. `/etc/zsh/zshrc` (if the shell is <strong>interactive</strong>)
6. `$ZDOTDIR/.zshrc` (if the shell is <strong>interactive</strong>)
7. `/etc/zsh/zlogin` (if the shell is a <strong>login</strong> shell)
8. `$ZDOTDIR/.zlogin` (if the shell is a <strong>login</strong> shell)

If ZDOTDIR is unset, HOME is used instead

When a login shell exits, the files $ZDOTDIR/.zlogout and then /etc/zsh/zlogout are read.  This happens with either an explicit exit via the `exit` or `logout` commands, or an implicit exit by reading end-of-file from the terminal.

##### invoking first-time setup

If no personal initialization files exist for the current user, a function is run to help you change some of the most common  settings.   It  won't  appear  if  your administrator  has disabled the zsh/newuser module.  The function is designed to be self-explanatory.  You can run it by hand with `autoload -Uz zsh-newuser-install; zsh-newuser-install -f`.

Commandline editing
-------------------

all about editing in command line is <strong>ZLE</strong> -  <strong>Zsh Line Editor</strong>(builtin zsh module).

<strong>Parameters</strong> used by ZLE(section PARAMETERS USED BY THE SHELL in zshparam man page):

* BAUD
* KEYTIMEOUT
* COLUMNS - the number of columns for this terminal session.  Used for printing select lists and for the line editor
* LINES - the number of lines for this terminal session.  Used for printing select lists and for the line editor
* zle_highlight - used to highlight what you editing

<strong>Commands</strong> used by ZLE:

* <strong>bindkey</strong> - manipulates keymaps and key bindings
* <strong>vared</strong> - invokes ZLE on the value of a shell parameter(like `vared PATH` will give you commandline interface to edit PATH variable)
* <strong>zle</strong> - manipulates editing widgets and allows command line access to ZLE commands from within shell functions

<strong>ZLE</strong> has <strong>six</strong> predefined <strong>keymaps</strong>(keymap in this case is a set of bindings between key sequences and ZLE commands)

| emacs   | EMACS emulation             |
| viins   | vi emulation - insert mode  |
| vicmd   | vi emulation - command mode |
| isearch | incremental search mode     |
| command | read a command name         |
| .safe   | fallback keymap             |

To select keymap use one of the following commands:

{% highlight bash %}
bindkey -e # Selects keymap 'emacs'
bindkey -v # Selects keymap 'viins'
bindkey -a # Selects keymap 'vicmd'
{% endhighlight %}

##### Command-line hotkeys:
{{{
| widget                    | emacs            | vicmd     | viins         | description                                                                                  |
|:--------------------------|:----------------:|:---------:|:-------------:|:---------------------------------------------------------------------------------------------|
| vi-backward-blank-word    |                  |  B        |               | Move backward one word, where  a  word  is  defined  as  a  series  of non-blank characters. |
| backward-char             |  ^B ESC-&#91;D   |           |               | Move backward one character. |
| vi-backward-char          |                  |  ^H h ^?  |  ESC-&#91;D   | Move backward one character, without changing lines. |
| backward-word             |  ESC-B ESC-b     |           |               | Move to the beginning of the previous word. |
| emacs-backward-word       |                  |           |               | Move to the beginning of the previous word. |
| vi-backward-word          |                  |  b        |               | Move to the beginning of the previous word, vi-style. |
| beginning-of-line         |  ^A              |           |               | Move to the beginning of the line.  If already at the beginning of the line, move to the beginning of the previous line, if any. |
| vi-beginning-of-line      |                  |           |               | Move to the beginning of the line, without changing lines. |
| end-of-line               |  ^E              |           |               | Move to the end of the line.  If already at the end of the line,  move to the end of the next line, if any. |
| vi-end-of-line            |                  |  $        |               | Move to the end of the line.  If an argument is given to this command, the cursor will be moved to the end of the line  argument -  1   lines down. |
| vi-forward-blank-word     |                  |  W        |               | Move  forward  one  word,  where  a  word  is  defined  as a series of non-blank characters. |
| vi-forward-blank-word-end |                  |  E        |               | Move to the end of the current word, or, if at the end of the  current word, to the end of the next word, where a word is defined as a series of non-blank characters. |
| forward-char              |  ^F ESC-&#91;C   |           |               | Move forward one character. |
| vi-forward-char           |                  |  space l  |  ESC-&#91;C   | Move forward one character.
| vi-find-next-char         |  ^X^F            |  f        |               | Read a character from the keyboard, and move to the next occurrence of it in the line. |
| vi-find-next-char-skip    |                  |  t        |               | Read  a  character  from  the  keyboard, and move to the position just before the next occurrence of it in the line. |
| vi-find-prev-char         |                  |  F        |               | Read a character from the keyboard, and move to  the  previous  occur‚Äê rence of it in the line. |
| vi-find-prev-char-skip    |                  |  T        |               | Read  a  character  from  the  keyboard, and move to the position just after the previous occurrence of it in the line. |
| vi-first-non-blank        |                  |  ^        |               | Move to the first non-blank character in the line. |
| vi-forward-word           |                  |  w        |               | Move forward one word, vi-style. |
| forward-word              |  ESC-F ESC-f     |           |               | Move to the beginning of the next word.  The editor's idea of  a  word is specified with the WORDCHARS parameter. |
| emacs-forward-word        |                  |           |               | Move to the end of the next word. |
| vi-forward-word-end       |                  |  e        |               | Move to the end of the next word. |
| vi-goto-column            |  ESC-\|          |  \|       |               | Move to the column specified by the numeric argument. |
| vi-goto-mark              |                  |  \`       |               | Move to the specified mark. |
| vi-goto-mark-line         |                  |  '        |               | Move to beginning of the line containing the specified mark. |
| vi-repeat-find            |                  |  ;        |               | Repeat the last vi-find command. |
| vi-rev-repeat-find        |                  |  ,        |               | Repeat the last vi-find command in the opposite direction. |
}}}

[Source](http://zsh.sourceforge.net/Doc/Release/Zsh-Line-Editor.html#Movement)

History setup
-------------

Command prompt
--------------

PS1  - for left prompt  
RPS1 - for right prompt  
look into zshmisc(EXPANSION OF PROMPT SEQUENCES)  

Completion system
-----------------
TODO

#### Links

* [zsh offical site](http://www.zsh.org/)
* [zsh on sourceforge.net](http://zsh.sourceforge.net/)
* [zsh online manual](http://zsh.sourceforge.net/Doc/Release/zsh_toc.html)
* [Z Shell user's guide](http://zsh.sourceforge.net/Guide/zshguide.html)
* [ZSH wiki](http://zshwiki.org/home/)
